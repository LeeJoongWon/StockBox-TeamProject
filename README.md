# 시가총액 32조 팀 프로젝트

![1](https://user-images.githubusercontent.com/83052628/215926277-6250440b-134a-4cd8-b05c-00c524c9fe60.JPG)

<br />

# 👪 팀원 소개
|<img src="https://avatars.githubusercontent.com/u/83052628?v=4" width="150px" />|<img src="https://avatars.githubusercontent.com/u/111216062?v=4" width="150px" />|<img src="https://avatars.githubusercontent.com/u/106802169?v=4" width="150px"/>|<img src="https://avatars.githubusercontent.com/u/110961521?v=4" width="150px" />|<img src="https://avatars.githubusercontent.com/u/80241053?v=4" width="150px"/>|<img src="https://avatars.githubusercontent.com/u/111164516?v=4" width="150px" />|
|-|-|-|-|-|-|
|[이중원](https://github.com/LeeJoongWon)|[박인우](https://github.com/FE41PIW)|[양우진](https://github.com/yan9vvoojin)|[박시환](https://github.com/psh1379)|[방재영](https://github.com/bangjaeyoung)|[임동규](https://github.com/pepsi160ml)
|FE 팀장<br/>(프로젝트 부팀장)|FE 팀원|FE 팀원|BE 팀장<br/>(프로젝트 팀장)|BE 팀원|BE 팀원|

<br />

# 🔧 기술 스택
### Front-End
<div align=left> 
  <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> 
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> 
  <img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black">
  <img src="https://img.shields.io/badge/react router-512BD4?style=for-the-badge&logo=react router&logoColor=black">
  <img src="https://img.shields.io/badge/reactquery-FF4154?style=for-the-badge&logo=reactquery&logoColor=white">
  <img src="https://img.shields.io/badge/recoil-DB7093?style=for-the-badge&logo=&logoColor=white">
  <img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=Node.js&logoColor=white">
  <img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white">
  <img src="https://img.shields.io/badge/styled-components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white">
  <img src="https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=npm&logoColor=white">
</div>

### Back-End
<div align=left> 
  <img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white">
  <img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=for-the-badge&logo=Spring Boot&logoColor=white">
  <img src="https://img.shields.io/badge/Spring DATA JPA-1572B6?style=for-the-badge&logo=Spring Boot&logoColor=white">
  <img src="https://img.shields.io/badge/Spring Security-E34F26?style=for-the-badge&logo=Spring Boot&logoColor=white"> 
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white"> 
  <img src="https://img.shields.io/badge/GRADLE-02303A?style=for-the-badge&logo=GRADLE&logoColor=white"> 
  <img src="https://img.shields.io/badge/LOMBOK-E10098?style=for-the-badge&logo&logoColor=white">
  <img src="https://img.shields.io/badge/MAPSTRUCT-F46800?style=for-the-badge&logo=&logoColor=white">
  
  <img src="https://img.shields.io/badge/H2 DB-0B2C4A?style=for-the-badge&logo&logoColor=white">
  <img src="https://img.shields.io/badge/JWT-40AEF0?style=for-the-badge&logo=&logoColor=white">
</div>

### Cloud
<div align=left> 
  <img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=for-the-badge&logo=Amazon EC2&logoColor=white"> 
  <img src="https://img.shields.io/badge/Amazon RDS-527FFF?style=for-the-badge&logo=Amazon RDS&logoColor=white">
  <img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white"> 
</div>

### 문서/협업
<div align=left> 
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
  <img src="https://img.shields.io/badge/discord-5865F2?style=for-the-badge&logo=discord&logoColor=white">
</div>

<br />

# 💡 프로젝트 구상 배경

주식을 처음 접하시는 분들을 위한 모의거래 사이트를 만들고 싶었습니다

주식을 처음 접하시는 분들이 실제 주식거래를 하면 대부분 경험과 지식이 없어서 손해를 볼 가능성이 높습니다

저희는 해당 문제를 해결하고자 가상의 돈으로 현실의 주식정보를 실시간으로 가져와 모의거래가 가능한 서비스를 만들고 싶었습니다

<br />

# 🔗 배포링크

http://stockboxtest.s3-website.ap-northeast-2.amazonaws.com/

<br />

# 🔗 FE 

## FE 팀장 이중원 (프로젝트 부팀장)
### 담당한 작업들
* 주식
* 뉴스
* 북마크
* 자산관리 
* 툴팁기능
* 알림기능
* 로드밸런서
* 페이지네이션
* 검색기능 개선
* 리엑트 쿼리, 리코일
* 숫자를 한글표시와 3자리 숫자마다 콤마를 찍어주는 기능
* 주식거래기록 계산기(매도,매수평균가,손익,일자별 거래기록등등)
* 날짜를 한글표시로 (~분전, ~일전, ~년전으로 바꿔주는) 바꿔주는 기능

<br />

### 1️⃣ 주식상세 페이지 
![Lee1](https://user-images.githubusercontent.com/83052628/215926402-7391d861-8519-405c-b478-7039e3d549ab.gif)

* 실시간 주식정보 기능  
* 현재 주식 장 시간이 어떤 시간인지 표시하는 기능
* 사용자의 편의를 위한 숫자를 한글표시로 바꿔주는 기능
* 매매에 성공 또는 실패에 따른 알림기능 (3초후 자동으로 닫힘)
* 사용자의 편의를 위한 3자리 숫자마다 콤마를 찍어서 보여주는 기능
* 사용자가 어려워할 만한 투자지표애 마우스오버를 하면 툴팁으로 설명을 보여주는 기능
* 매매를 돕기위해 평단가와 손익 매수금액 매도금액등을 계산하여 사용자에게 알려주는 기능
* 사용자가 보유한 주식수량보다 적을떄와 예수금이 부족할떄 사용자가 거래를 할 수 없도록 막는 기능

<br />

### 2️⃣ 주식 전체페이지 & TOP10 페이지
![Lee2](https://user-images.githubusercontent.com/83052628/215929568-316a8cec-a165-4c36-87c4-b72e84d3b4ad.gif)

* 주식 검색기능
* 코스피와 코스닥 주식을 구분 할 수 있는 탭 기능
* 시가총액, 상승폭, 하락폭, 거래량, 거래대금에 따른 정렬기능

<br />

### 3️⃣ 관심종목 페이지 (북마크)
![Lee3](https://user-images.githubusercontent.com/83052628/215930365-76c9ee75-3e03-4aef-8801-2ae1a4adf1aa.gif)

* 검색기능
* 전체주식 리스트와 북마크한 주식을 나누어 탭 기능 구현 (사용자 편의성을 위한)

<br />

### 4️⃣ 자산관리 페이지
![Lee4](https://user-images.githubusercontent.com/83052628/215931303-60e65ff4-036c-4fd7-84f8-424690411074.gif)

* 거래기록을 보여주는 기능
* 사용자가 보유한 주식들의 가치의 비율을 파이형태의 차트로 보여주는 기능
* 총 자산, 예수금, 보유 주식가치, 손익등등을 계산하여 사용자에게 보여주는 기능
* 예수금, 보유 주식가치, 손익을 거래 단위별로 계산하여 라인형태의 차트로 보여주는 기능
* 사용자가 한눈에 알아보기 쉽게 거래기록 시간을 한글표시로 ~분전, ~일전, ~년전으로 바꿔주는 기능

<br />

### 5️⃣ 개선, 최적화

<br />

### 리엑트 리코일
![Lee5](https://user-images.githubusercontent.com/83052628/215931388-24bdb31c-0f03-4bff-bee0-be18d2fc7acd.JPG)

주식 정보는 외부 api를 사용하기 때문에 트래픽제한과 api 응답속도에서 문제가 발생하였습니다

주식 상세정보를 담당하는 한국투자증권 api는 초당 20회의 트래픽제한이 있다는것이 문제였고

주식 전체리스트정보를 가져오는 정부의 누리집 api는 응답속도가 평균 2~3초가 소요된다는 문제가 있었습니다  

이것을 해결하기 위해 리엑트 쿼리를 도입하였습니다

리엑트 쿼리를 선택하게 된 이유는 동기화와 캐싱기능 그리고 훅기반이라서 사용하기 쉽기 때문에 리엑트 쿼리를 도입하였습니다

먼저 api요청을 줄이기 위해 데이터의 상태를 

1. 실시간으로 변하는 값

2. 하루단위로 변하는 값

3. 유저 상호작용에 의해 변하는 값 으로 구분하였습니다

실시간으로 변하는 값은 뉴스정보,주식 현재가가 있고

하루단위로 변하는 값은 주식매매동향, 주식일자별정보, 주식전체리스트정보가 있습니다

유저 상호작용에 의해 변하는 값들은 유저 북마크, 유저 지갑이 있습니다

이것을 리엑트쿼리의 캐싱기능을 이용하여 각각의 상황에 따라 api요청을 하게 만들었고 그 외에는 api요청을 하지 않고

캐쉬된 데이터를 사용하도록 구현하였습니다

이것을 통해 api의 느린 응답속도와 트래픽제한을 어느정보 해결을 하여 성능개선을 이루었습니다

리엑트 쿼리가 훅 기반이기 떄문에 컴포넌트와 api를 분리하여 코드의 가독성을 향상시키는 효과도 있었습니다

<br />

### 검색기능 개선
![Lee6](https://user-images.githubusercontent.com/83052628/215932202-482967cf-8fcb-4374-9d90-3ef55e9cd61e.png)

검색기능은 일부 문자가 일치하면 해당 문자와 관련있는 추천목록을 보여주는 기능이 있습니다

문제는 이 기능을 사용하기 위해 전체주식정보를 불러오는데 약 3000길이의 배열입니다

매번 사용자가 검색창에 입력할떄마다 3000길이의 반복문이 작동한다는 문제점이 있었습니다

이것을 성능개선하기 위해 map 자료구조을 사용하였습니다

먼저 전체 주식리스트 정보를 받아오면 첫글자를 map 자료구조의 키로 설정하고 같은 첫글자를 가진 데이터끼리 묶어서 배열로 만들었습니다

이후에는 사용자가 검색창에 입력할떄 사용자가 입력한 첫글자를 가져와 map자료구조에 접근하여 해당 글자와 관련있는 주식목록을 보여주는 기능을 구현하였습니다

매번 3000길이의 반복문이 작동하던것을 map자료구조로 대체하여 이전보다 검색성능이 약 10배정도 증가하였습니다

<br />

### 검색기능 사용자 편의성 개선
![2](https://user-images.githubusercontent.com/83052628/215935132-473fa8d5-ac13-426d-827a-c3cdbcfab5cf.gif)

사용자 편의성을 위해 헤더의 검색창에 검색했을 시 일치하는 주식이 있으면 해당 주식 상세페이지로 이동하게 만들고

일치하는 주식이 없다면 전체리스트 페이지로 이동하여 검색한 키워드와 비슷한 주식목록을 보여주는 기능을 구현하였습니다



<br />

### 로드밸런서
![Lee7](https://user-images.githubusercontent.com/83052628/215932285-5b96f133-5f66-4af4-b2a2-bbd9271bc168.JPG)

간단한 로드밸런서 기능을 구현하였습니다

프론트에서 서버의 주소 리스트를 가지고 있고

처음 자바스크립트가 실행되면 랜덤한 서버주소를 가리키는 포인터를 할당받습니다

사용자가 api요청에 문제가 없다면 포인터가 가리키는 서버주소는 바뀌지 않습니다

하지만 api요청에서 부정적인 응답을 받는다면 포인터는 다른 서버를 가리키고 바로 바뀐 서버로 재요청을 하도록 구현하였습니다

무한루프에 빠지는것을 방지하기 위해 부정적인 응답이 연속으로 서버의 갯수만큼 반복되면 멈추도록 만들었습니다

이것을 통해 개선한점은 증권사 api의 트래픽제한입니다

증권사 api는 초당 20회의 트래픽제한이 있습니다

이것을 서버를 여러개 만들고 사용자는 각각 서버에 분산되어 통신하다가 해당 서버에서 트래픽제한이 걸리면 바로 다른 서버로 재요청을 보내도록 하여

트래픽제한을 해결하였습니다

<br />

## FE 양우진 팀원 
### 담당한 작업들
* 로그인
* 회원가입
* 유저정보
* 유효성 검사  

<br />

### 1️⃣ 회원가입 페이지
![1](https://user-images.githubusercontent.com/83052628/215933134-eeb4aa16-87c6-41c3-99f7-f15ab9146b53.JPG)

* 유효성 검사 기능
* 계정이 존재하는 유저들을 위한 로그인페이지 유도기능
* 유효성 검사에 실패했을 시 사용자에게 표시해주는 기능
* 모든 유효성 검사에 통과를 했을 시 회원가입 버튼 활성화 기능
* 비밀번호를 잘못 입력했을 경우를 대비하여 비밀번호 체크 기능

<br />

### 2️⃣ 로그인 페이지
![1](https://user-images.githubusercontent.com/83052628/215933816-f0d4e8a0-4483-4453-aaeb-0e62ba5078ad.JPG)

* 유효성 검사 기능
* 사용자 편의성을 위한 로그인 유지 버튼과 기능
* 회원이 아닌 사용자를 위한 회원가입 유도 버튼
* 유효성 검사에 실패했을 시 사용자에게 표시해주는 기능
* 아이디와 비밀번호 유효성 검사에 통과를 했을 시 로그인 버튼 활성화 기능


<br />

### 3️⃣ 회원정보 페이지
![1](https://user-images.githubusercontent.com/83052628/215934414-7c7bfc63-825d-461f-85e3-20828cb50769.JPG)

* 회원탈퇴 기능
* 회원정보 수정기능
* 게시판에 작성했던 글의 목록들을 보여주는 기능
* 즐겨찾기 (북마크)를 한 리스트를 출력하는 기능
* 회원정보 수정하기 이전에 비밀번호를 통해 유저검증하는 기능
* 게시판에 작성했던 글을 클릭해면 해당 게시판으로 이동하는 기능
* 즐겨찾기를 한 주식을 클릭했을 시 해당 주식페이지로 이동하는 기능

<br />

## FE 박인우 팀원 
### 담당한 작업들
* 헤더, 푸터, 사이드바
* 게시판
* 검색창 기능
* 전체적인 레이아웃

<br />

### 1️⃣ 헤더, 푸터, 사이드바 와 레이아웃
![1](https://user-images.githubusercontent.com/83052628/215933134-eeb4aa16-87c6-41c3-99f7-f15ab9146b53.JPG)

* 사이드바가 컨텐츠랑 겹처지 안도록 하는 기능
* 화면를 확대하거나 축소해도 푸터의 위치를 하단으로 고정하는 기능
* 그리드 css를 사용하여 레이아웃을 헤더, 사이드바, 푸터, 컨텐츠 영역으로 구분
* 사용자의 편의성을 위해 스크롤의 위치와 관계없이 헤더와 사이드바를 고정시키는 기능

<br />

### 2️⃣ 검색창 기능
![1](https://user-images.githubusercontent.com/83052628/215933134-eeb4aa16-87c6-41c3-99f7-f15ab9146b53.JPG)

* 검색어를 초기화주는 버튼 기능
* 추천검색어 클릭시 해당 주식페이지로 이동하는 기능
* 페이지 이동시 검색창의 검색어를 초기화해주는 기능
* 검색시 검색어와 유사한 주식목록을 추천검색어로 보여주는 기능
* 검색창의 onfocus와 onblur 이벤트 기능

사용자가 검색창 바깥영역을 클릭했을 시 추천검색어 목록이 닫히고 다시 검색창을 클릭하면 추천검색어를 보여주는 기능을 구현하였습니다

<br />


✔️ Git Commit Message Convention

[Feat] : 새로운 기능에 대한 커밋

[Fix] : 버그 수정에 대한 커밋

[Build] : 빌드 관련 파일 수정에 대한 커밋

[Chore] : 그 외 자잘한 수정에 대한 커밋

[Ci] : CI관련 설정 수정에 대한 커밋

[Docs] : 문서 수정에 대한 커밋

[Sytle] : 코드 스타일 혹은 포맷 등에 관한 커밋

[Test] : 테스트 코드 수정에 대한 커밋
